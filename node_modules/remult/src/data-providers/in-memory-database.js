"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InMemoryDataProvider = void 0;
var tslib_1 = require("tslib");
var array_entity_data_provider_js_1 = require("./array-entity-data-provider.js");
var InMemoryDataProvider = /** @class */ (function () {
    function InMemoryDataProvider() {
        this.rows = {};
    }
    InMemoryDataProvider.prototype.transaction = function (action) {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, action(this)];
                    case 1:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    InMemoryDataProvider.prototype.getEntityDataProvider = function (entity) {
        var name = entity.key;
        if (!this.rows[name])
            this.rows[name] = [];
        return new array_entity_data_provider_js_1.ArrayEntityDataProvider(entity, this.rows[name]);
    };
    InMemoryDataProvider.prototype.toString = function () {
        return 'InMemoryDataProvider';
    };
    return InMemoryDataProvider;
}());
exports.InMemoryDataProvider = InMemoryDataProvider;
